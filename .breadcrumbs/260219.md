# Breadcrumbs 2026-02-19

- **02:33:38**: Fix primary lisa findings
  Added interactive shell waiting_input classification with pane-tree inspection (ignoring passive sleep helpers), added session exists --project-root support, and added session capture --strip-noise filtering for Codex/MCP startup noise. Updated tests and usage/help docs; go test ./... passes.
- **02:33:39**: Refresh context docs
  Updated src/.agents/state-machine.md and .agents/sdk-usage.md to document interactive_shell_idle classification, passive sleep handling, capture --strip-noise, and exists --project-root support.
- **02:55:59**: Flip capture noise default
  Changed session capture to filter Codex/MCP startup noise by default; added --keep-noise opt-out (kept --strip-noise as compatibility alias), updated help/USAGE/SDK docs, and added tests for default-strip and keep-noise behavior.
- **14:01:21** (`src/utils.go`): Harden shell quoting for control chars
  shellQuote now switches to ANSI-C $'...' quoting when control chars are present, avoiding raw multiline/control chars in JSON command payloads while preserving exec semantics.
- **14:01:21** (`.agents/conventions.md`): Refresh conventions context for quoting
  Documented ANSI-C quoting fallback for control characters in shell-quoted commands.
- **14:01:21** (`src/regressions_test.go`): Add multiline spawn JSON regression coverage
  Added tests for multiline prompt spawn JSON payload and control-char shellQuote behavior to prevent regressions.
- **14:26:18** (`src/commands_session.go`): Add codex exec nested tmux hint
  Spawn now prints explicit fallback guidance when codex exec fails with tmux socket permission errors: switch to interactive mode or pass unsafe codex exec flag.
- **14:26:18** (`src/e2e_nested_interactive_fake_test.go`): Add 3-level nested interactive e2e coverage
  New e2e test validates L1->L2->L3 nested Lisa session orchestration in interactive mode with tmux monitoring/capture markers.
- **14:26:18** (`USAGE.md`): Document nested codex guidance
  USAGE now calls out codex exec sandbox tmux limits and recommends interactive nesting unless explicitly bypassing sandbox.
- **14:26:22** (`.agents/sdk-usage.md`): Refresh SDK context for nested codex sessions
  Documented that codex exec full-auto may block nested tmux and that interactive mode is the preferred deep-nesting path.
- **14:26:35** (`src/.agents/testing.md`): Update testing context for nested interactive e2e
  Added new 3-level nested interactive e2e test entry to testing context index.
- **15:31:07** (`scripts/smoke-nested-3level.sh`): Add nested interactive smoke runner
  Created deterministic L1->L2->L3 smoke script using ./lisa interactive spawn/monitor/capture with marker assertions, artifact output, and cleanup.
- **15:31:07**: Refresh docs/context for smoke command
  Updated README.md, USAGE.md, .agents/sdk-usage.md, .agents/project-overview.md, .agents/conventions.md, and src/.agents/testing.md to document nested smoke workflow.
- **15:31:07** (`smoke-nested`): Add repo-local smoke command
  Added executable ./smoke-nested wrapper to run scripts/smoke-nested-3level.sh from repo root.
