# Breadcrumbs 2026-02-22

- **00:02:25**: Implement all context-optimization ideas
  Added session autopilot, monitor --until-jsonpath, capture --summary-style, handoff --cursor-file, context-pack --from-handoff, route --budget, list --active-only/--with-next-action, smoke --chaos, guard --enforce, and skills doctor --explain-drift with tests; rebuilt ./lisa and validated help/runtime contracts.
- **00:02:26** (`.agents/sdk-usage.md`): Refresh SDK docs for new orchestration features
  Documented autopilot, jsonpath gating, handoff cursors, from-handoff repack, route budget, list next-action, smoke chaos, guard enforce, and drift remediation guidance.
- **00:40:54**: Fix monitor/jsonpath, smoke mixed marker drop, and handoff mismatch handling
  Patched monitor errorCode gating for successful --until-jsonpath, hardened smoke mixed/drop-marker line removal with explicit target removal, enforced --for/--from-handoff session consistency, and added regression tests in src/session_additional_ideas_test.go
- **00:46:40**: Addressed additional reviewer findings in monitor/smoke
  Prevented --until-marker from overriding successful --until-jsonpath, added regression tests for jsonpath precedence, smoke missing-marker failure payload, and report-min chaos metadata; full go test/go vet green.
- **00:48:54**: Added monitor precedence/JSONPath parsing coverage
  Added tests for JSONPath numeric expectation and invalid expression handling, plus precedence when --until-jsonpath and --until-marker are both set; all tests and vet pass.
- **02:00:23** (`src/oauth_tokens.go`): Add OAuth token pool
  Added secure local Claude OAuth token store (~/.lisa/oauth_tokens.json, 0600), round-robin selector, invalid/expired token detection, and auto-prune helper for crashed/stuck sessions.
- **02:00:23**: Refresh context docs
  Updated AGENTS/.agents docs for new oauth add|list|remove commands, spawn-time token injection, and auto-prune behavior.
