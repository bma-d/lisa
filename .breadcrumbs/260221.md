# Breadcrumbs 2026-02-21

- **00:48:14** (`src/commands_session_smoke.go`): Add nested smoke command
  Implemented 'session smoke' with deterministic nested orchestration (levels 1-4), marker assertions, JSON summary, and optional keep-sessions behavior.
- **00:48:14** (`src/commands_session_state.go`): Add monitor expectation gates
  Added session monitor --expect any|terminal|marker with fail-fast mismatch reasons (expected_terminal_got_* / expected_marker_got_*).
- **00:48:14** (`src/commands_session_manage.go`): Add JSON output for manage commands
  Added --json support to session name/list/exists/kill/kill-all plus docs/help/test updates and tree --flat rows.
- **00:48:14** (`.agents/sdk-usage.md`): Refresh context docs for new session APIs
  Updated AGENTS/.agents/src context docs for smoke command, monitor expectation semantics, tree flat rows, and manage-command JSON support.
- **01:11:40**: Updated Lisa skill docs for smoke-first nesting
  Aligned skills/lisa/SKILL.md with current CLI monitor semantics, JSON command surface, and 4-level session smoke guidance; kept file at 500 lines.
- **01:11:40**: Logged changelog entry for lisa skill sync/build/install
  Added docs/changelog/260221.md entry documenting skill doc refresh plus verification commands (go build, ./lisa skills install, monitor help).
- **01:36:20**: Indexified Lisa skill into router + data docs
  Split skills/lisa/SKILL.md into compact router and added skills/lisa/data/{commands,recipes,runtime}.md for JIT context loading; preserved command/runtime semantics.
- **01:36:20**: Ran skill-optimiser postflight + skill install
  Wrote skills/lisa/.last-optimiser-hash, appended optimiser log row, validated table-row guard, and synced skill to ~/.codex and ~/.claude via ./lisa skills install.
- **04:40:45**: Added final changelog follow-up entry
  Appended non-duplicate docs/changelog/260221.md entry per changelog-auto clean-tree path and prepared commit-all.
- **04:51:28**: Lisa skill audit
  Executed comprehensive ./lisa command matrix, lifecycle/exit-code probes, nested smoke (4 levels), and creative lisa-in-lisa chain; captured discrepancies for monitor expect marker, tree metadata semantics, and kill-missing behavior.
- **04:51:29**: Lisa skill docs refined
  Updated skills/lisa SKILL.md + data/{commands,recipes,runtime}.md for LLM guardrails, nested trigger validation guidance, explicit defaults/JSON schemas, and active-vs-metadata session semantics; installed updated skill to ~/.codex and ~/.claude.
- **05:13:54**: Implemented Lisa CLI enhancements
  Added session tree --active-only, session monitor --json-min, session spawn --detect-nested diagnostics, and machine-readable errorCode payloads for JSON failure paths across JSON-enabled commands.
- **05:13:55**: Validated nested and regression coverage
  Added feature tests (active-only tree, json-min monitor, detect-nested spawn, JSON error codes), rebuilt ./lisa, ran go test ./..., and re-ran 4-level session smoke JSON verification.
