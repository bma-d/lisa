# Breadcrumbs 2026-02-18

- **22:18:46**: Fix exec crash classification
  Propagate wrapped exec exit code into session done marker by passing __lisa_exec_ec through wrapExecCommand->wrapSessionCommand; add unit and e2e regression coverage for monitor crashed exit code 2 and done marker :7.
- **22:18:47**: Postflight context sync
  Reviewed AGENTS/.agents guidance after fix; no context doc updates required (no new APIs, deps, or workflow conventions).
- **22:27:53**: Add waiting/long-command regressions
  Added explicit monitor --stop-on-waiting=false semantics test (waiting_input should not terminate early) and explicit >500-char tmux fallback script-path test validating /tmp/lisa-cmd-* creation + respawn-pane usage + script contents.
- **22:27:53**: Postflight context sync
  Reviewed AGENTS/.agents after adding test-only coverage; no context docs changed (no API/runtime behavior change).
- **23:03:56**: Detach tmux commands from nested client context
  Unset TMUX in tmux command runtime env and session wrapper/fallback scripts; updated tests for TMUX stripping; renamed session-name wording to unique in help/docs.
- **23:03:59**: Refresh context docs for tmux detachment
  Updated .agents/conventions.md with tmux detachment pattern and refreshed Last Updated date.
- **23:26:33**: Add runtime routing regressions
  Added runtime_routing_regression_test.go covering root resolution precedence/fallbacks, short tmux socket path invariants, and cmd session send implicit-root socket routing. Re-ran focused + full go test suite.
- **23:36:42**: Run live nested lisa smoke
  Built lisa, verified doctor, and executed live nested orchestration smoke: outer -> parent(exec) -> child(exec) -> grand(exec). Validated monitor/capture/status/explain/list/exists/kill across levels and implicit project-root resolution for nested child commands from /tmp. Added targeted live send regression (implicit root from /tmp) verifying send_text lifecycle + marker file.
