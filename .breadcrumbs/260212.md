# Breadcrumbs 2026-02-12

- **09:34:50**: Add transcript-based turn completion signal
  New checkTranscriptTurnComplete function in claude_session.go reads tail of Claude JSONL transcript to detect when an assistant turn has completed (last meaningful entry is assistant with text block and file is stale >3s). Integrated into status.go classification switch between interactiveWaiting and promptWaiting. Session ID cached in sessionState to avoid re-scanning history.jsonl. New signals: TranscriptTurnComplete, TranscriptFileAge, TranscriptError in statusSignals. 5 unit tests + 2 regression tests added.
- **10:05:47**: Fix review findings: capture gating + Claude session cache
  session capture now transcript-only for Claude sessions; non-Claude defaults raw. transcript metadata lookup now honors explicit project root without glob fallback. persisted discovered ClaudeSessionID in session state; added regression tests for non-Claude capture default and session-id persistence.
- **10:08:58**: Address extra capture/meta issues from review follow-up
  Added transcript->raw fallback in default session capture for Claude transcript failures, introduced captureSessionTranscript/writeTranscriptCapture helpers, hardened loadSessionMetaByGlob with deterministic candidate selection + multi-project ambiguity error, and added regression tests for non-Claude fallback, transcript-failure fallback, and ambiguous metadata detection.
- **10:12:51**: feat: Codex transcript-based turn completion signal
  New codex_session.go with types/functions mirroring Claude pattern. Added CodexSessionID to sessionState. Extended status.go transcript block with codex case. 7 new unit tests + 1 regression test, all passing.
