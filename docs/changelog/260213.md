# Changelog - 260213

## 260213-03:59:20 - Guard promptWaiting from triggering while agent process is busy

### Summary
Prevent false `waiting_input` classification when Claude's split UI shows `❯` prompt during long-running bash commands.

### Fixed
- `promptWaiting` case in status switch now requires `!activeProcessBusy`, preventing misclassification after ~20s of a long bash command
- Updated `TestPromptWaitingDetectedEvenWithHighCPU` → `TestPromptWaitingNotTriggeredWhenProcessBusy` to expect `in_progress` when process is busy
- Added `TestPromptWaitingDuringLongBashCommand` regression test for split-UI scenario

### Files
- `src/status.go`
- `src/regressions_test.go`
- `src/.agents/state-machine.md`

### QA Notes
- `go test -run "TestPromptWaiting" -v` — PASS
- `go test ./...` — PASS
