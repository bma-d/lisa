# Changelog - 260225

## 260225-05:32:41 - Align packet cursor and handoff schema contracts

### Summary
Fixed packet cursor compatibility across `session packet` JSON modes and aligned handoff lane-contract schema guidance with runtime behavior.

### Added
- Regression tests for packet cursor legacy parsing, mode roundtrip, and ordered `--json-min` -> `--delta-json` sequence.
- Regression test ensuring `session handoff --schema v4` is accepted when lane contract is `handoff_v2_required`.

### Changed
- Updated handoff schema rejection guidance to `--schema v2|v3|v4`.
- Updated lisa skill docs and validation notes to match packet cursor and handoff schema contracts.

### Fixed
- `session packet --cursor-file ... --json-min` followed by `--delta-json --json` no longer fails with `invalid_cursor_file`.
- Shared cursor offset loading now accepts both numeric and JSON cursor formats.

### Files
- `src/commands_session_packet.go`
- `src/commands_session_orchestration.go`
- `src/session_feature_cluster_b_test.go`
- `src/session_send_handoff_contract_fix_test.go`
- `skills/lisa/SKILL.md`
- `skills/lisa/data/commands.md`
- `skills/lisa/data/validation.md`

### QA Notes
- Verify `./lisa session packet --cursor-file /tmp/lisa.packet.cursor --json-min` then `./lisa session packet --cursor-file /tmp/lisa.packet.cursor --delta-json --json` exits `0` and has no `errorCode`.
- Verify lane contract `handoff_v2_required` rejects `--schema v1` with `errorCode:"handoff_schema_v2_required"` and guidance `v2|v3|v4`.
- Verify lane contract `handoff_v2_required` accepts `./lisa session handoff --schema v4 --json`.
- Verify `go test ./src` passes.
